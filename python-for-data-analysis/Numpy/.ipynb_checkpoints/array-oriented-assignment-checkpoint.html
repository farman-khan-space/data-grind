<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NumPy E-Commerce Challenge</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .task-card {
            transition: all 0.3s ease-in-out;
        }
        .solution {
            display: none;
            transition: all 0.3s ease;
        }
        .code-block {
            background-color: #f3f4f6; /* gray-100 */
            border-radius: 0.5rem;
            padding: 1rem;
            font-family: monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold text-slate-900">NumPy E-Commerce Challenge</h1>
            <p class="mt-4 text-lg text-indigo-600">A Case Study for "StyleSphere" Fashion</p>
            <p class="mt-2 max-w-2xl mx-auto text-slate-600">Apply array-oriented programming concepts to analyze real-world sales data.</p>
        </header>

        <!-- Data Setup Section -->
        <div class="bg-white p-6 rounded-2xl shadow-lg mb-12 border border-slate-200">
            <h2 class="text-2xl font-bold mb-4 text-slate-900">Step 1: Create Your Dataset</h2>
            <p class="mb-4 text-slate-600">Your first task is to create the dataset for 'StyleSphere'. In your Python environment, import NumPy and generate the following arrays. Use `numpy.random.default_rng()` for random data generation and set a seed (e.g., `rng = np.random.default_rng(42)`) to ensure your results can be compared to the solutions.</p>
            <ul class="list-disc list-inside space-y-2 text-slate-700">
                <li><code class="bg-gray-200 p-1 rounded">transaction_ids</code>: An array of 100 integers from 1001 to 1100. (Hint: <code class="bg-gray-200 p-1 rounded">np.arange</code>)</li>
                <li><code class="bg-gray-200 p-1 rounded">prices</code>: An array of 100 floats representing prices, uniformly distributed between 20.00 and 500.00. Round to 2 decimal places.</li>
                <li><code class="bg-gray-200 p-1 rounded">quantities</code>: An array of 100 integers, randomly chosen from 1 to 5 (inclusive).</li>
                <li><code class="bg-gray-200 p-1 rounded">customer_segments</code>: An array of 100 strings, randomly chosen from <code class="bg-gray-200 p-1 rounded">['New', 'Loyal', 'VIP']</code>. The probabilities should be 40% for 'New', 40% for 'Loyal', and 20% for 'VIP'.</li>
                <li><code class="bg-gray-200 p-1 rounded">is_discounted</code>: A boolean array of 100 values, with a 30% chance of being <code class="bg-gray-200 p-1 rounded">True</code> and 70% of being <code class="bg-gray-200 p-1 rounded">False</code>.</li>
            </ul>
        </div>
        
        <!-- Tasks Section -->
        <div class="space-y-8">

            <!-- Task 1 -->
            <div class="task-card bg-white p-6 rounded-2xl shadow-lg border border-slate-200">
                <h3 class="text-xl font-bold text-indigo-700 mb-3">Task 1: Calculate Transaction Revenue</h3>
                <p class="mb-4 text-slate-600">Using a single vectorized operation, calculate the total revenue for each transaction. This should be the price multiplied by the quantity. Store the result in a new array called `revenues`.</p>
            </div>

            <!-- Task 2 -->
            <div class="task-card bg-white p-6 rounded-2xl shadow-lg border border-slate-200">
                <h3 class="text-xl font-bold text-indigo-700 mb-3">Task 2: Basic Statistical Analysis</h3>
                <p class="mb-4 text-slate-600">Now that you have the `revenues` array, calculate and print the average (mean) transaction value and the total revenue across all transactions.</p>
            </div>

            <!-- Task 3 -->
            <div class="task-card bg-white p-6 rounded-2xl shadow-lg border border-slate-200">
                <h3 class="text-xl font-bold text-indigo-700 mb-3">Task 3: Conditional Logic with `np.where`</h3>
                <p class="mb-4 text-slate-600">StyleSphere wants to apply a 5% processing fee to all transactions that were <span class="font-semibold">not discounted</span>. Use `np.where` to create a new array `final_revenues` which is equal to the original `revenues` for discounted items, but is `revenues * 1.05` for non-discounted items.</p>
            </div>

            <!-- Task 4 -->
            <div class="task-card bg-white p-6 rounded-2xl shadow-lg border border-slate-200">
                <h3 class="text-xl font-bold text-indigo-700 mb-3">Task 4: Methods for Boolean Arrays</h3>
                <p class="mb-4 text-slate-600">The marketing team wants to know how many transactions were made by 'VIP' customers. Create a boolean array to identify these transactions and then use an array method to count them.</p>
            </div>

            <!-- Task 5 -->
            <div class="task-card bg-white p-6 rounded-2xl shadow-lg border border-slate-200">
                <h3 class="text-xl font-bold text-indigo-700 mb-3">Task 5: Sorting to Find Top Transactions</h3>
                <p class="mb-4 text-slate-600">Identify the top 5 highest-value transactions from the `revenues` array. You'll need an indirect sort to get the indices of the highest values, and then use those indices to show the revenues.</p>
            </div>

            <!-- Task 6 -->
            <div class="task-card bg-white p-6 rounded-2xl shadow-lg border border-slate-200">
                <h3 class="text-xl font-bold text-indigo-700 mb-3">Task 6: Set Logic for Unique Segments</h3>
                <p class="mb-4 text-slate-600">To understand our customer base, find all the unique customer segments that exist in the `customer_segments` array.</p>
            </div>

            <!-- Mega Task -->
             <div class="mt-12 bg-gradient-to-r from-indigo-700 to-purple-800 p-8 rounded-2xl shadow-2xl text-white">
                <h2 class="text-3xl font-bold mb-4">Mega Task: High-Value Customer Analysis</h2>
                <p class="mb-6 text-indigo-200">Now, let's combine everything. The leadership team wants a report on the **total revenue generated from high-value customers ('Loyal' or 'VIP') on full-price (non-discounted) items**. This requires combining conditional logic, boolean array operations, and statistical methods. Write the code to calculate and print this final value.</p>
                <p class="mt-4 text-sm text-indigo-300">This final task demonstrates how you can chain vectorized operations together to answer complex business questions efficiently without a single `for` loop!</p>
            </div>
            
            <!-- Solutions Section -->
            <div class="mt-12 bg-white p-6 rounded-2xl shadow-lg border border-slate-200">
                <h2 class="text-2xl font-bold text-center mb-4 text-slate-900">Solutions to Sub-Tasks</h2>
                <div class="text-center">
                    <button onclick="toggleSolution('all-solutions')" class="bg-indigo-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-indigo-700 transition-colors duration-300">
                        Show/Hide Solutions
                    </button>
                </div>
                <div id="all-solutions" class="solution mt-6 space-y-6" style="border-left: none;">
                    
                    <!-- Solution 1 -->
                    <div>
                        <h4 class="font-semibold mb-2 text-indigo-700">Solution for Task 1: Calculate Transaction Revenue</h4>
                        <div class="code-block text-sm">
<pre>
# Element-wise multiplication
revenues = prices * quantities
print(revenues[:5]) # Display first 5 revenue values
</pre>
                        </div>
                    </div>

                    <!-- Solution 2 -->
                    <div>
                        <h4 class="font-semibold mb-2 text-indigo-700">Solution for Task 2: Basic Statistical Analysis</h4>
                        <div class="code-block text-sm">
<pre>
avg_revenue = revenues.mean()
total_revenue = revenues.sum()
print(f"Average Transaction Value: ${avg_revenue:.2f}")
print(f"Total Revenue: ${total_revenue:.2f}")
</pre>
                        </div>
                    </div>

                    <!-- Solution 3 -->
                    <div>
                        <h4 class="font-semibold mb-2 text-indigo-700">Solution for Task 3: Conditional Logic with `np.where`</h4>
                        <div class="code-block text-sm">
<pre>
# The condition is is_discounted. If True, use revenues. If False, use revenues * 1.05.
final_revenues = np.where(is_discounted, revenues, revenues * 1.05)
print("Original revenues:\n", revenues[:5])
print("Final revenues with fee:\n", final_revenues[:5])
</pre>
                        </div>
                    </div>

                    <!-- Solution 4 -->
                    <div>
                        <h4 class="font-semibold mb-2 text-indigo-700">Solution for Task 4: Methods for Boolean Arrays</h4>
                        <div class="code-block text-sm">
<pre>
is_vip = (customer_segments == 'VIP')
vip_transaction_count = is_vip.sum() # .sum() on a boolean array counts the Trues
print(f"Number of VIP transactions: {vip_transaction_count}")
</pre>
                        </div>
                    </div>

                    <!-- Solution 5 -->
                    <div>
                        <h4 class="font-semibold mb-2 text-indigo-700">Solution for Task 5: Sorting to Find Top Transactions</h4>
                        <div class="code-block text-sm">
<pre>
# Get indices that would sort the array in ascending order
sorted_indices = revenues.argsort()
# Get the last 5 indices for the top 5 values
top_5_indices = sorted_indices[-5:]
# Get the revenues using these indices and reverse for descending order
top_5_revenues = revenues[top_5_indices][::-1]
print("Top 5 Transaction Revenues:\n", top_5_revenues)
</pre>
                        </div>
                    </div>
                    
                    <!-- Solution 6 -->
                    <div>
                        <h4 class="font-semibold mb-2 text-indigo-700">Solution for Task 6: Set Logic for Unique Segments</h4>
                        <div class="code-block text-sm">
<pre>
unique_segments = np.unique(customer_segments)
print("Unique customer segments:", unique_segments)
</pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleSolution(id) {
            const solutionDiv = document.getElementById(id);
            if (solutionDiv.style.display === 'none' || solutionDiv.style.display === '') {
                solutionDiv.style.display = 'block';
            } else {
                solutionDiv.style.display = 'none';
            }
        }
    </script>

</body>
</html>

